extends ../layout

block content
	.row-fluid
		.span6
			h3 Groups
			table.table.table-hover
				thead
					tr
						th Name
						th Info
						th Edit
						th
						th Delete
				tbody
					if groups
						for group in groups
							tr
								td
									// Group Badge
									if group.internal.status == "New group - Unchecked" || group.internal.status == "Edited - Unchecked" || group.internal.status == null
										span.badge.badge-important= group.groupMembers.length
									else if group.internal.status == "Group waiting for info"
										span.badge.badge-warning= group.groupMembers.length
									else if group.internal.status == "New group - Reviewed"
										span.badge= group.groupMembers.length
									else
										span.badge.badge-success= group.groupMembers.length
									// Group Affilation
									b #{group.groupInformation.affiliation}
									br
									small #{group._id}
								td
									// Group Status
									if group.internal.status == "New group - Unchecked" || group.internal.status == "Edited - Unchecked" || group.internal.status == null
										span.label.label-important= group.internal.status
									else if group.internal.status == "Group waiting for info"
										span.label.label-warning= group.internal.status
									else if group.internal.status == "New group - Reviewed"
										span.label= group.internal.status
									else
										span.label.label-success= group.internal.status
									//
									br
									// Workshop Reg
									if group.internal.workshopReg == "Not sent"
										span.label Workshop Reg #{group.internal.workshopReg}
									else if group.internal.workshopReg == "Sent"
										span.label.label-success Workshop Reg #{group.internal.workshopReg}
								td
									.btn-group
										a.btn.btn-primary(href="/admin/login/#{group._id}") Login
										a.btn.btn-info.notes(data-id="#{group._id}", href="#groupNotes", data-toggle="modal") Notes
										a.btn.btn-inverse(href="/admin/payments?group=#{group._id}") Payments
										a.btn(href="/admin/log?group=#{group._id}") Log
								td
								td
									a.btn.btn-danger(href="#", rel="tooltip", data-trigger="click", data-title="Are you sure?", data-content="You'll need to manually navigate to <a href='http://gatheringourvoices.bcaafc.com/api/removeGroup/#{group._id}'>this link</a>. Otherwise, click the button again to leave this area.", data-html='true') Delete
						tr
							td
								a(href="/account/signup") Add a new group...
							td
								small This will log you out!

	.modal.hide.fade#groupNotes(tabindex='-1', role='dialog', aria-hidden='true')
		include elements/groupNotes.jade

	script
		$('.btn-danger').popover()
	!= js('admin/main')